---
- name: Verify Prometheus file service discovery
  hosts: all
  gather_facts: false
  tasks:
    - name: Get sd_file path
      ansible.builtin.stat:
        path: "{{ prometheus_sd_file_path }}/sd_file.yml"
      register: sd_file_path

    - name: Exists sd_file
      ansible.builtin.assert:
        that: sd_file_path == {{ prometheus_sd_file_path }}/sd_file.yml
